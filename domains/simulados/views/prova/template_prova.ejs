<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <title>Template Geração PDF - IFVest Estilo ENEM</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
   
    <link rel="stylesheet" href="/simulados/css/prova/templateprova.css">


</head>
<body>



    <div id="simulado-print-area" class="page-container">

        <div class="controls">
            <button id="printButton">Imprimir Simulado</button>
            <button id="toggleAnswersButton">Mostrar/Ocultar Gabarito</button>
        </div>

        <header class="exam-header">
            <h1><%= simulado.titulo %></h1>
            <p><%= simulado.descricao %></p>
        </header>

        <main class="content-area">

            <% simulado.Questao.forEach((questao, index) => { %>
            
                <article class="question">
                    
                    <p class="question-text">
                        <%= questao.titulo || `Questão ${index + 1}` %>
                    </p>
                    
                    <div class="question-body">
                   
                        <%- parseRichText(questao.pergunta) %>
                    </div>

                    
                    <ol class="alternatives">
                        
                 <% if (questao.tipo === "OBJETIVA") { %>
                            <% questao.Opcao.forEach(opcao => { %>
                                <li data-answer="<%= opcao.correta %>">
                                    <%- parseRichText(opcao.descricao) %>
                                </li>
                            <% }) %>
                        <% } else { %>
                    <div class="essay-container">
                        
                        <div class="essay-answer">
                            <strong>Gabarito / Resposta Esperada:</strong>
                            <div class="answer-content">
                                 <% questao.Opcao.forEach(opcao => { %>
                              
                                    <%- parseRichText(opcao.descricao) %>
                               
                            <% }) %>
                            </div>
                        </div>

                        <div class="lines-paper">
                            <div class="line"></div>
                            <div class="line"></div>
                            <div class="line"></div>
                            <div class="line"></div>
                            <div class="line"></div>
                            <div class="line"></div>
                            <div class="line"></div>
                        </div>
                    </div>
                <% } %>



                    </ol>
                </article>

            <% }) %>
            
        </main> 
        </div> 
        <script>
        // O JavaScript original para os botões permanece IDÊNTICO.
        document.addEventListener('DOMContentLoaded', function() {
            
            const printButton = document.getElementById('printButton');
            if (printButton) {
                printButton.addEventListener('click', function() {
                    window.print();
                });
            }

            const toggleAnswersButton = document.getElementById('toggleAnswersButton');
            if (toggleAnswersButton) {
                toggleAnswersButton.addEventListener('click', function() {
                    document.body.classList.toggle('show-answers');
                });
            }
        });
    </script>

</body>
</html>